(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{577:function(t,s,v){"use strict";v.r(s);var a=v(29),_=Object(a.a)({},(function(){var t=this,s=t.$createElement,v=t._self._c||s;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("div",{staticClass:"custom-block tip"},[v("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),v("p",[t._v("宝塔面板实在是太复杂了，研究了两天没搞懂，只能搞个大概的教程，本文仅供参考。")])]),t._v(" "),v("h2",{attrs:{id:"基础环境"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#基础环境"}},[t._v("#")]),t._v(" 基础环境")]),t._v(" "),v("ul",[v("li",[t._v("Ubuntu Server 20.04")]),t._v(" "),v("li",[t._v("宝塔 7.9.2")])]),t._v(" "),v("h2",{attrs:{id:"上传可执行文件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#上传可执行文件"}},[t._v("#")]),t._v(" 上传可执行文件")]),t._v(" "),v("p",[t._v("上传可执行文件到服务器，上传位置由你自己决定，确保自己能找到，我测试的时候直接上传压缩包，然后用宝塔面板解压没有反应，不知道是我这里的 bug 还是整个宝塔面板都有问题，建议不使用压缩包，直接拖整个文件夹上去。")]),t._v(" "),v("p",[t._v("上传文件后检查权限，确保有执行权限，貌似宝塔上传的文件默认权限就是 755，这一步大概率可以省略，不放心的话就再检查一遍。")]),t._v(" "),v("p",[t._v("同时还要注意一下文件所有者，这里记一下，后面会用到，我也不知道宝塔文件所有到底是谁，面板上看是 root，但是使用  "),v("code",[t._v("ls -lha")]),t._v("  命令查看，文件所有者是 www，如果有懂的朋友可以解释一下。")]),t._v(" "),v("p",[v("img",{attrs:{src:"/assets/img/2022/20220712-%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E6%9D%83%E9%99%90.png",alt:"宝塔面板权限"}})]),t._v(" "),v("h2",{attrs:{id:"修改配置文件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件"}},[t._v("#")]),t._v(" 修改配置文件")]),t._v(" "),v("p",[t._v("修改  "),v("code",[t._v("appsettings.json")])]),t._v(" "),v("p",[t._v("需要修改的部分主要有：")]),t._v(" "),v("ul",[v("li",[v("code",[t._v("Kestrel.Endpoints.Http.Url")]),t._v(" : 监听地址和端口，根据需要修改，如果只是在本机反代，无需修改，如果需要在其他机器上反代，可修改为  "),v("code",[t._v("http://0.0.0.0:5001")])]),t._v(" "),v("li",[v("code",[t._v("WithOrigins")]),t._v(" : 跨域配置，如无跨域限制需求，无需修改。")]),t._v(" "),v("li",[v("code",[t._v("Admins")]),t._v(" : 必须修改，配置管理员账户和密码，可配置多个。")])]),t._v(" "),v("h2",{attrs:{id:"守护进程"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#守护进程"}},[t._v("#")]),t._v(" 守护进程")]),t._v(" "),v("p",[t._v("先安装  "),v("code",[t._v("supervisor")]),t._v(" ，在终端执行")]),t._v(" "),v("div",{staticClass:"language-bash line-numbers-mode"},[v("pre",{pre:!0,attrs:{class:"language-bash"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),v("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" supervisor\n")])]),t._v(" "),v("div",{staticClass:"line-numbers-wrapper"},[v("span",{staticClass:"line-number"},[t._v("1")]),v("br")])]),v("p",[t._v("以上命令仅限 Ubuntu 20.04 和 Debian11，其他系统自己去想办法解决。")]),t._v(" "),v("p",[t._v("然后在宝塔的软件商店找到  "),v("code",[t._v("Supervisor管理器")]),t._v(" ，安装完成后配置")]),t._v(" "),v("p",[v("img",{attrs:{src:"/assets/img/2022/20220712-%E9%85%8D%E7%BD%AE%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B.png",alt:"配置守护进程"}})]),t._v(" "),v("p",[t._v("注意，截图上的可执行文件路径是错的，别 TM 不思考直接照着抄，错的都看不出来，看教程就是要举一反三，参考教程，根据自己的实际情况做出调整。")]),t._v(" "),v("p",[t._v("只要状态是  "),v("code",[t._v("RUNNING")]),t._v("  就正常了，其他状态自行排查错误，直接去看子配置文件，配置文件才是能直接看出错误的地方。")]),t._v(" "),v("h2",{attrs:{id:"反向代理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#反向代理"}},[t._v("#")]),t._v(" 反向代理")]),t._v(" "),v("p",[t._v("在宝塔面板上创建一个纯静态站点。")]),t._v(" "),v("p",[t._v("然后设置站点的反向代理。")]),t._v(" "),v("p",[v("img",{attrs:{src:"/assets/img/2022/20220712-%E6%B7%BB%E5%8A%A0%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86.png",alt:"添加反向代理"}})]),t._v(" "),v("p",[t._v("注意一下端口号，别跟个 SB 一样，自己改了配置文件里的端口号，这里还是写 5001，你改的什么就用什么。")]),t._v(" "),v("p",[t._v("不出意外的话到这里教程就完成了。")])])}),[],!1,null,null,null);s.default=_.exports}}]);