---
title: 安装和基本介绍
date: 2022-01-24 14:17:12
categories:
  - 开源项目
  - vuepress-plugin-smplayer
tags:
  - 开源项目
  - vuepress-plugin-smplayer
permalink: /pages/963900/
---

::: warning
本插件目前仅在 Vuepress 1.x 版本测试，其他版本未作测试
:::

## 简介

[vuepress-plugin-smplayer](https://github.com/u2sb/vuepress-plugin-smplayer) 是一个能在 Vuepress 中快速插入媒体标签的插件，目前支持的标签和平台有（持续开发中）：

- [x] [Aplayer](https://github.com/DIYgod/APlayer)
- [x] [MetingJS](https://github.com/metowolf/MetingJS)
- [x] [Dplayer](https://github.com/DIYgod/DPlayer)
- [x] [哔哩哔哩](https://www.bilibili.com/)
- [x] [西瓜视频](https://www.ixigua.com/)
- [ ] [YouTube]()
- [x] [ArtPlayer](https://github.com/zhw2590582/ArtPlayer)
- [x] [xgplayer](https://github.com/bytedance/xgplayer)

## 使用

vuepress-plugin-smplayer 插件和其他 Vuepress 插件使用方法类似，诸如 如何启用一个插件 之类的共性问题就不再赘述了，只说 vuepress-plugin-smplayer 相关的。

### 安装

<code-group>
  <code-block title="PNPM" active>
  ```bash
  pnpm install vuepress-plugin-smplayer -D
  ```
  </code-block>

  <code-block title="YARN">
  ```bash
  yarn add vuepress-plugin-smplayer -D
  ```
  </code-block>

  <code-block title="NPM">
  ```bash
  npm install vuepress-plugin-smplayer -D
  ```
  </code-block>
</code-group>

### 配置

::: warning
这一部分会随着插件持续更新，如无特殊说明，最新文档对应最新版插件。插件目前仍在开发阶段，不排除接口变更的可能性。
:::

::: warning
默认情况下无需额外配置，如有需要，请按需配置。
:::

```js .vuepress/config.js
module.exports = {
  plugins: [
    [
      "smplayer",
      {
        /* 配置项见详细文档 */
      },
    ],
  ],
};
```

或

```js .vuepress/config.js
module.exports = {
  plugins: {
    smplayer: {
      /* 配置项见详细文档 */
    },
  },
};
```

::: warning
以下是一种 ts 配置示例，建议使用 config.ts 时使用以下配置方法，如果看不懂的话就按照自己的理解搞吧，vuepress 通用的配置方法一样可以用，只是没有类型约束。
:::

```ts .vuepress/config/plugins.ts
// .vuepress/config/plugins.ts

import { UserPlugins } from "vuepress/config";
import fs from "fs";
import { resolve } from "path";
import player, { SmPlayerPluginOption } from "vuepress-plugin-smplayer";

const smplayer: [typeof player, SmPlayerPluginOption] = [
  player,
  {
    meting: {
      api: "https://sm.sm9.top/api/meting?server=:server&type=:type&id=:id&r=:r",
    },
    artplayer: {
      src: {
        playbackRate: true,
        whitelist: ["*"],
      },
    },
  },
];

const hostname = `https://${fs.readFileSync(
  resolve(__dirname, "../public", "CNAME")
)}`;

export default <UserPlugins>[
  ["sitemap", { hostname }],
  smplayer,
  ["pangu"],
  [
    "one-click-copy",
    {
      copySelector: [
        'div[class*="language-"] pre',
        'div[class*="aside-code"] aside',
      ],
      copyMessage: "复制成功",
      duration: 1000,
      showInMobile: false,
    },
  ],
];
```

## 建议

- 建议配置 `shouldPrefetch: () => false`
- 建议插件使用动态引入，这样可以避免插件使用浏览器 API 会报错的问题，详见 [Browser API Access Restrictions](https://v1.vuepress.vuejs.org/guide/using-vue.html#browser-api-access-restrictions)

## FQA

详见 [FQA](./0999.FQA.md)

## 反馈

:::warning
插件中部分代码是由 Copilot 自动生成，未经严格测试，如发现问题请及时反馈。
:::

[GitHub](https://github.com/u2sb/vuepress-plugin-smplayer/issues)
